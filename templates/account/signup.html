{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% load i18n %}
{% load account socialaccount %}

{% block content %}
{% get_providers as socialaccount_providers %}

<link href="https://fonts.googleapis.com/css?family=Kaushan+Script" rel="stylesheet">

<style type="text/css">
#id_account_type{
  display: flex !important;;
}
    body{
        background-color: #edf0f2;
    }
.login-or {
position: relative;
color: #aaa;
margin-top: 10px;
margin-bottom: 10px;
padding-top: 10px;
padding-bottom: 10px;
}
.span-or {
display: block;
position: absolute;
left: 50%;
top: -2px;
margin-left: -25px;
background-color:#edf0f2;
width: 50px;
text-align: center;
}
.hr-or {
height: 1px;
margin-top: 0px !important;
margin-bottom: 0px !important;
}
h1,h2,h3{
font-family: 'Kaushan Script', cursive;
text-align:center;
margin-bottom: auto;
}
.google {
    color:#666;
    width:100%;
    height:40px;
    text-align:center;
    outline:none;
    border: 1px solid lightgrey;
}
.google:hover{
  color:#fff;
  background-color:#0074f0;

}
.mybtn{
    border-radius:50px;
    }
</style>
<div class="container">

    <div style="margin-bottom: 15px;" class="row">
   
        <div class="col col-lg-4 col-md-12 col-sm-12 offset-lg-4">
            {% for message in messages %}
    
            <div class="alert alert-{{message.tags}} alert-dismissible fade show" role="alert">
              <strong>{{message.tags}}!</strong>{{message}}
              <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>   
            {% endfor %}
            <h1>Signup</h1>
          <form  id="form" action="{% url 'account_signup' %}" method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="form-group">
                {{form|crispy}}  
                       </div>
        
 
             <div class="form-group">
                <p class="text-center">Already have Account? <a href="{% url 'account_login' %}" id="signup">Login here</a></p>
             </div> 
            <br>
            {% if redirect_field_value %}
            <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}" />
            {% endif %}
            <button type="submit" class=" btn btn-block mybtn btn-primary tx-tfm">Signup</button>
          </form>
          <div id="tesst">
           
        </div>

        </div>
     
    </div>
</div>
    
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

<script style="text/javascript">
   $(document).ready(function() {
      $("#id_phone").keydown(function(event) {
          // Allow: backspace, delete, tab, escape, and enter
          if (event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 ||
              // Allow: Ctrl+A
              (event.keyCode == 65 && event.ctrlKey === true) ||
              // Allow: home, end, left, right
              (event.keyCode >= 35 && event.keyCode <= 39)) {
              // let it happen, don't do anything
              return;
          } else {
              // Ensure that it is a number and stop the keypress
              if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105)) {
                  event.preventDefault();
              }
          }
      });
  });

$("#id_account_type").change(function () {
      const type = $(this).val();  // get the selected subject ID from the HTML dropdown list 
      $.ajax({                       // initialize an AJAX request
          type: "POST",
          url: '{% url "home:home" %}',
          data: {
              'type': type,       // add the country id to the POST parameters
              'csrfmiddlewaretoken':$('input[name=csrfmiddlewaretoken]').val(),
          },
          success: function (data) {   // `data` is from `get_topics_ajax` view function
            if(data.name == "teacher"){
              $("#tesst").show();
           let html_data=`
           <label class='requiredField' for='id_about_me'>About You</label>
           <textarea id='id_about_me' class='textarea form-control' name='about_me' cols='40' rows='5' ></textarea>`;
              $("#tesst").html(html_data);
            }
           else if(data.name == "student"){
              $("#tesst").hide();
               }
             

             
           
         }
      });
  });


   </script>
   
{% endblock %}
