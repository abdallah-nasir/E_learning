{% extends 'dashboard_base.html' %}
{% load hosts %}

{% load crispy_forms_tags %}


{% block content %}


                <!-- Begin Page Content -->
                <div class="container-fluid">

                    <!-- Page Heading -->
                    <h1 class="h3 mb-2 text-gray-800">Add Faqs</h1>
                    <!-- <p class="mb-4">DataTables is a third party plugin that is used to generate the demo table below.
                        For more information about DataTables, please visit the <a target="_blank"
                            href="https://datatables.net">official DataTables documentation</a>.</p> -->

                    <!-- DataTales Example -->
                    <div class="card shadow mb-4">
                        <div class="card-header py-3">
                            {% comment %} <h6 class="m-0 font-weight-bold text-primary">DataTables Example</h6> {% endcomment %}
                        </div>
                        <div class="card-body">
                            <form method="POST" enctype="multipart/form-data" >
                                {% csrf_token %}
                                {{form.media}}
                                <div class="form-group">

                               {{form|crispy}}
                               
                                </div>
                                
                                <button onclick="this.disabled=true,this.form.submit();" class="btn btn-primary" type="submit">Submit</button>
                            </form>
                        </div>
                    </div>

                </div>
                <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
                <!-- /.container-fluid -->
        <script style="text/javascript">
$("#id_category").change(function () {
        const Category = $(this).val();  // get the selected subject ID from the HTML dropdown list 
        $.ajax({                       // initialize an AJAX request
            type: "POST",
            url: '{% url "dashboard:faqs:add_faqs"  %}',
            data: {
                'category': Category,       // add the country id to the POST parameters
                'csrfmiddlewaretoken':$('input[name=csrfmiddlewaretoken]').val(),
            },
            success: function (data) {   // `data` is from `get_topics_ajax` view function
               
                let html_data1="<option value=''>---------</option>";
                
                data.forEach(function (data) {
                    html_data1 += `
                    <option value='${data.id}'>${data.name}</option>
                    `
                });
                $("#id_branch").html(html_data1);
              
            }
        });
    });
</script>
{% endblock %}